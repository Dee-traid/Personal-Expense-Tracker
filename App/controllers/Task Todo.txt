- Complete sset up of mvc,
- email setup for budget 




Perfect! Let me provide all the code directly in chat. Here's the complete CLI Router system:

---

## **1. app/Core/Router.php**

```php
<?php
namespace App\Core;

use App\Controllers\AuthController;
use App\Controllers\ExpenseController;
use App\Controllers\CategoryController;
use App\Controllers\BudgetController;
use App\Views\CLIHelper;

class Router {
    private static ?string $currentUserId = null;
    private static bool $isRunning = true;

    public static function run(): void {
        self::showWelcome();
        
        while (self::$isRunning) {
            if (self::$currentUserId === null) {
                self::showGuestMenu();
            } else {
                self::showMainMenu();
            }
        }
        
        self::showGoodbye();
    }

    private static function showWelcome(): void {
        echo "\n";
        echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n";
        echo "â•‘                                                    â•‘\n";
        echo "â•‘        ðŸ’° EXPENSE TRACKER APPLICATION ðŸ’°          â•‘\n";
        echo "â•‘                                                    â•‘\n";
        echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n";
        echo "\n";
    }

    private static function showGoodbye(): void {
        echo "\n";
        echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n";
        echo "â•‘                                                    â•‘\n";
        echo "â•‘     Thank you for using Expense Tracker! ðŸ‘‹       â•‘\n";
        echo "â•‘                                                    â•‘\n";
        echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n";
        echo "\n";
    }

    // ============================================
    // GUEST MENU (Not Logged In)
    // ============================================
    private static function showGuestMenu(): void {
        echo "\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n";
        echo "â”‚         AUTHENTICATION MENU         â”‚\n";
        echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n";
        echo "  1. Login\n";
        echo "  2. Register\n";
        echo "  3. Reset Password\n";
        echo "  4. Exit\n";
        echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n";

        $choice = CLIHelper::getInput("Enter your choice");

        switch ($choice) {
            case '1':
                self::handleLogin();
                break;
            case '2':
                self::handleRegister();
                break;
            case '3':
                self::handleResetPassword();
                break;
            case '4':
                self::$isRunning = false;
                break;
            default:
                CLIHelper::error("Invalid choice. Please try again.");
        }
    }

    // ============================================
    // MAIN MENU (Logged In)
    // ============================================
    private static function showMainMenu(): void {
        echo "\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n";
        echo "â•‘                   MAIN MENU                        â•‘\n";
        echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n";
        echo "\n";
        echo "  [1] ðŸ“Š Expenses Management\n";
        echo "  [2] ðŸ“‚ Categories Management\n";
        echo "  [3] ðŸ’µ Budget Management\n";
        echo "  [4] ðŸ“ˆ Reports & Analytics\n";
        echo "  [5] ðŸ‘¤ User Profile\n";
        echo "  [6] ðŸšª Logout\n";
        echo "  [7] âŒ Exit Application\n";
        echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n";

        $choice = CLIHelper::getInput("Enter your choice");

        switch ($choice) {
            case '1':
                self::showExpenseMenu();
                break;
            case '2':
                self::showCategoryMenu();
                break;
            case '3':
                self::showBudgetMenu();
                break;
            case '4':
                self::showReportsMenu();
                break;
            case '5':
                self::showProfileMenu();
                break;
            case '6':
                self::handleLogout();
                break;
            case '7':
                self::$isRunning = false;
                break;
            default:
                CLIHelper::error("Invalid choice. Please try again.");
        }
    }

    // ============================================
    // EXPENSE MENU
    // ============================================
    private static function showExpenseMenu(): void {
        echo "\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n";
        echo "â”‚       EXPENSE MANAGEMENT            â”‚\n";
        echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n";
        echo "  1. Add New Expense\n";
        echo "  2. View All Expenses\n";
        echo "  3. Update Expense\n";
        echo "  4. Delete Expense\n";
        echo "  5. Search Expenses\n";
        echo "  6. Filter Expenses by Period\n";
        echo "  7. Delete All Expenses\n";
        echo "  8. Back to Main Menu\n";
        echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n";

        $choice = CLIHelper::getInput("Enter your choice");

        $controller = new ExpenseController();

        switch ($choice) {
            case '1':
                $controller->addExpense(self::$currentUserId);
                break;
            case '2':
                $controller->viewAllExpenses(self::$currentUserId);
                break;
            case '3':
                $controller->updateExpense();
                break;
            case '4':
                $controller->deleteExpense();
                break;
            case '5':
                $controller->searchExpenses(self::$currentUserId);
                break;
            case '6':
                $controller->filterExpenses(self::$currentUserId);
                break;
            case '7':
                $controller->deleteAllExpenses();
                break;
            case '8':
                return;
            default:
                CLIHelper::error("Invalid choice. Please try again.");
        }

        self::pauseForUser();
    }

    // ============================================
    // CATEGORY MENU
    // ============================================
    private static function showCategoryMenu(): void {
        echo "\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n";
        echo "â”‚      CATEGORY MANAGEMENT            â”‚\n";
        echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n";
        echo "  1. Add New Category\n";
        echo "  2. View All Categories\n";
        echo "  3. Update Category\n";
        echo "  4. Delete Category\n";
        echo "  5. Delete All Categories\n";
        echo "  6. Back to Main Menu\n";
        echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n";

        $choice = CLIHelper::getInput("Enter your choice");

        $controller = new CategoryController();

        switch ($choice) {
            case '1':
                $controller->addCategory(self::$currentUserId);
                break;
            case '2':
                $controller->viewAllCategories(self::$currentUserId);
                break;
            case '3':
                $controller->updateCategory();
                break;
            case '4':
                $controller->deleteCategory();
                break;
            case '5':
                $controller->deleteAllCategories();
                break;
            case '6':
                return;
            default:
                CLIHelper::error("Invalid choice. Please try again.");
        }

        self::pauseForUser();
    }

    // ============================================
    // BUDGET MENU
    // ============================================
    private static function showBudgetMenu(): void {
        echo "\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n";
        echo "â”‚       BUDGET MANAGEMENT             â”‚\n";
        echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n";
        echo "  1. Add New Budget\n";
        echo "  2. View All Budgets\n";
        echo "  3. Update Budget\n";
        echo "  4. Delete Budget\n";
        echo "  5. Check Budget Status\n";
        echo "  6. Delete All Budgets\n";
        echo "  7. Back to Main Menu\n";
        echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n";

        $choice = CLIHelper::getInput("Enter your choice");

        $controller = new BudgetController();

        switch ($choice) {
            case '1':
                $controller->addBudget(self::$currentUserId);
                break;
            case '2':
                $controller->viewAllBudgets(self::$currentUserId);
                break;
            case '3':
                $controller->updateBudget();
                break;
            case '4':
                $controller->deleteBudget();
                break;
            case '5':
                $controller->checkBudget(self::$currentUserId);
                break;
            case '6':
                $controller->deleteAllBudgets();
                break;
            case '7':
                return;
            default:
                CLIHelper::error("Invalid choice. Please try again.");
        }

        self::pauseForUser();
    }

    // ============================================
    // REPORTS MENU
    // ============================================
    private static function showReportsMenu(): void {
        echo "\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n";
        echo "â”‚      REPORTS & ANALYTICS            â”‚\n";
        echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n";
        echo "  1. Expense Statistics\n";
        echo "  2. Expenditure Report\n";
        echo "  3. Expense Report by Category\n";
        echo "  4. Period Calculations\n";
        echo "  5. Back to Main Menu\n";
        echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n";

        $choice = CLIHelper::getInput("Enter your choice");

        $controller = new ExpenseController();

        switch ($choice) {
            case '1':
                $controller->showExpenseStats(self::$currentUserId);
                break;
            case '2':
                $controller->showExpenditureReport(self::$currentUserId);
                break;
            case '3':
                $controller->showExpenseReportByCategory(self::$currentUserId);
                break;
            case '4':
                $controller->showExpenseCalculations(self::$currentUserId);
                break;
            case '5':
                return;
            default:
                CLIHelper::error("Invalid choice. Please try again.");
        }

        self::pauseForUser();
    }

    // ============================================
    // PROFILE MENU
    // ============================================
    private static function showProfileMenu(): void {
        echo "\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n";
        echo "â”‚         USER PROFILE                â”‚\n";
        echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n";
        echo "  1. View Profile\n";
        echo "  2. Update Profile\n";
        echo "  3. Delete Account\n";
        echo "  4. Back to Main Menu\n";
        echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n";

        $choice = CLIHelper::getInput("Enter your choice");

        $controller = new AuthController();

        switch ($choice) {
            case '1':
                $controller->viewProfile(self::$currentUserId);
                break;
            case '2':
                $controller->updateProfile(self::$currentUserId);
                break;
            case '3':
                $confirmed = $controller->deleteAccount(self::$currentUserId);
                if ($confirmed) {
                    self::$currentUserId = null;
                }
                break;
            case '4':
                return;
            default:
                CLIHelper::error("Invalid choice. Please try again.");
        }

        self::pauseForUser();
    }

    // ============================================
    // AUTHENTICATION HANDLERS
    // ============================================
    private static function handleLogin(): void {
        $controller = new AuthController();
        $user = $controller->login();
        
        if ($user) {
            self::$currentUserId = $user->getID();
            CLIHelper::success("Welcome, " . $user->getUserName() . "!");
            self::pauseForUser();
        }
    }

    private static function handleRegister(): void {
        $controller = new AuthController();
        $user = $controller->register();
        
        if ($user) {
            self::$currentUserId = $user->getID();
            CLIHelper::success("Welcome, " . $user->getUserName() . "!");
            self::pauseForUser();
        }
    }

    private static function handleResetPassword(): void {
        $controller = new AuthController();
        $controller->resetPassword();
        self::pauseForUser();
    }

    private static function handleLogout(): void {
        if (AppManager::confirm("Are you sure you want to logout? (y/n): ")) {
            self::$currentUserId = null;
            CLIHelper::success("Logged out successfully!");
        }
    }

    // ============================================
    // UTILITY METHODS
    // ============================================
    private static function pauseForUser(): void {
        echo "\n";
        readline("Press Enter to continue...");
    }

    public static function getCurrentUserId(): ?string {
        return self::$currentUserId;
    }

    public static function setCurrentUserId(?string $userId): void {
        self::$currentUserId = $userId;
    }
}
```

---

## **2. bootstrap/app.php**

```php
<?php

// PSR-4 Autoloader
spl_autoload_register(function ($class) {
    $prefix = 'App\\';
    $baseDir = __DIR__ . '/../app/';
    
    $len = strlen($prefix);
    if (strncmp($prefix, $class, $len) !== 0) {
        return;
    }
    
    $relativeClass = substr($class, $len);
    $file = $baseDir . str_replace('\\', '/', $relativeClass) . '.php';
    
    if (file_exists($file)) {
        require $file;
    }
});

// Error handling
error_reporting(E_ALL);
set_error_handler(function($errno, $errstr, $errfile, $errline) {
    echo "\n\033[31m[Error {$errno}] {$errstr}\033[0m\n";
    echo "File: {$errfile}\n";
    echo "Line: {$errline}\n\n";
    return true;
});

set_exception_handler(function($exception) {
    echo "\n\033[31m[Exception] " . $exception->getMessage() . "\033[0m\n";
    echo "File: " . $exception->getFile() . "\n";
    echo "Line: " . $exception->getLine() . "\n\n";
    echo $exception->getTraceAsString() . "\n";
});

// Test database connection on startup
try {
    \App\Core\Database::getPDOInstance();
} catch (\Exception $e) {
    echo "\033[31mFailed to connect to database. Please check your configuration.\033[0m\n";
    exit(1);
}
```

---

## **3. index.php**

```php
<?php

require __DIR__ . '/bootstrap/app.php';

use App\Core\Router;

// Start the CLI application
Router::run();
```

---

## **4. app/Core/AppManager.php**

```php
<?php
namespace App\Core;

class AppManager {
    public static function confirm(string $prompt = "Continue? (y/n): "): bool {
        while (true) {
            $ans = strtolower(readline($prompt));
            if (in_array($ans, ['y', 'yes'], true)) return true;
            if (in_array($ans, ['n', 'no'], true)) return false;
            echo "Please answer y or n.\n";
        }
    }
}
```

---

## **5. app/Core/Database.php**

```php
<?php
namespace App\Core;

use PDO;
use PDOException;

class Database {
    private static ?PDO $pdo = null;

    public static function getPDOInstance(): PDO {
        if (self::$pdo !== null) {
            return self::$pdo;
        }

        $host = 'localhost';
        $port = '5432';
        $user = 'postgres';
        $password = 'Traid101';
        $database = 'expense_tracker';

        $dsn = "pgsql:host=$host;port=$port;dbname=$database;";
        
        try {
            self::$pdo = new PDO($dsn, $user, $password);
            self::$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        } catch (PDOException $e) {
            echo "\033[31mConnection Failed: " . $e->getMessage() . "\033[0m\n";
            exit(1);
        }
        
        return self::$pdo;
    }
}
```

---

**Continue with Controllers in next message...**